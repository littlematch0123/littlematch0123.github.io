{"version":3,"sources":["main.js"],"names":["navData","localStorage","getItem","navObj","JSON","parse","dataArr","window","onbeforeunload","setItem","stringify","navBar","document","getElementsByClassName","moduleNode","urlInput","selectedIndex","render","innerHTML","html","forEach","item","index","onclick","e","target","nodeName","location","dataset","parentNode","navMores","Array","from","style","display","value","stopPropagation","delBtn","addBtn","classList","contains","splice","testUrl","push","simplifyUrl","initModule","currentTarget","url","test","exec"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["// 读取 localStorage\nconst navData = localStorage.getItem('navData')\nconst navObj = JSON.parse(navData)\nlet dataArr = navObj || [\n    'cnblogs.com',\n    'github.com',\n    'segmentfault.com',\n    'wangdoc.com',\n    'xiaohuochai.cc'\n]\nwindow.onbeforeunload = () => {\n    localStorage.setItem('navData', JSON.stringify(dataArr))\n}\n// 储存 localStorage\nconst navBar = document.getElementsByClassName('main-nav')[0];\nconst moduleNode = document.getElementsByClassName('module')[0];\nconst urlInput = moduleNode.getElementsByClassName('module-input')[0];\n\n// 标志位(-1表示当前没有被操作的导航项，可以新增导航)\nlet selectedIndex = -1\n\n// 根据 dataArr 来渲染页面\n\nconst render = () => {\n    // 清空元素\n    navBar.innerHTML = '';\n    let html = '';\n    // 生成元素\n    dataArr.forEach((item, index) => {\n        html += `\n            <dl class=\"fl\" data-index=${index}>\n            <dt>${item[0]}</dt>\n            <dd>${item}</dd>\n            <dd>\n                <svg class=\"main-nav-more\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n                    <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n                    />\n                </svg>\n            </dd>\n            </dl>\n        `\n    })\n    navBar.innerHTML = html;\n    // 绑定事件\n    // 导航面板点击\n    navBar.onclick = function (e) {\n        let { target } = e;\n        // 点击相应导航项，打开对应网址\n        while (target !== navBar) {\n            if (target.nodeName === 'DL') {\n                location = `https://${dataArr[target.dataset.index]}`\n                break;\n            }\n            target = target.parentNode;\n        }\n        // 点击\n    }\n    // 导航项的“更多”点击\n    const navMores = document.getElementsByClassName('main-nav-more');\n    Array.from(navMores).forEach((item, index) => {\n        item.onclick = (e) => {\n            // 显示编辑窗口\n            moduleNode.style.display = 'block';\n            // 设置标志位为当前索引值\n            selectedIndex = index;\n            // input 中显示网址\n            urlInput.value = dataArr[index];\n            // 阻止冒泡\n            e.stopPropagation()\n        }\n    })\n}\nrender();\n\n// 编辑窗口的三个按钮点击\nconst delBtn = moduleNode.getElementsByClassName('btn_delete')[0];\nconst addBtn = document.getElementsByClassName('main-add')[0];\nmoduleNode.onclick = (e) => {\n    const { target } = e;\n    const { classList } = target;\n    if (target.nodeName !== 'BUTTON') {\n        return;\n    }\n    if (classList.contains('btn_delete')) {\n        // 删除当前项\n        dataArr.splice(selectedIndex, 1)\n        // 重新渲染\n        render();\n    } else if (classList.contains('btn_cancel')) {\n        // 取消\n    } else if (classList.contains('btn_done')) {\n        const { value } = urlInput;\n        // 如果输入的网址不符合规范，则直接返回\n        if (!testUrl(value)) {\n            return;\n        }\n        // 如果标志位为 -1，则新增，否则修改\n        if (selectedIndex === -1) {\n            // 处理url，并添加到 dataArr 中\n            dataArr.push(simplifyUrl(value));\n        } else {\n            // 修改处理后的url\n            dataArr[selectedIndex] = simplifyUrl(urlInput.value)\n        }\n        // 重新渲染\n        render();\n    }\n    initModule(e);\n}\n// 右下角的'+'按钮点击\naddBtn.onclick = () => {\n    // 隐藏删除按钮\n    delBtn.style.display = 'none';\n    // 将标志位设置为 —1，表示可以新增\n    selectedIndex = -1;\n    // 显示编辑窗口\n    moduleNode.style.display = 'block';\n}\n\nfunction initModule(e) {\n    // 隐藏编辑窗口\n    e.currentTarget.style.display = 'none';\n    // 清空 input 里面的值\n    urlInput.value = '';\n    // 显示删除按钮\n    delBtn.style.display = 'inline-block';\n}\n\nfunction testUrl(url) {\n    if (/(https?:)?(\\/\\/)?(www.)?([^\\/]+)(\\/.*)?/.test(url)) {\n        return true\n    }\n}\n\n// 简化 url https://www.baidu.com/dfdfd/fdfdf/ -> baidu.com\nfunction simplifyUrl(url) {\n    return /(https?:)?(\\/\\/)?(www.)?([^\\/]+)(\\/.*)?/.exec(url)[4]\n}\n"]}